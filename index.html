<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Movie Watchlist</title>
</head>
<body>
    <div class="movie-app">
    <input type="text" id="movie-input" placeholder="Search for a movie...">
    <button id="add-movie-btn">Search & Add</button>
    
    <ul id="watchlist">
        </ul>
</div>

<script>
  // Fixed the typo here: changed movieImput to movieInput
  const movieInput = document.getElementById("movie-input"); 
  const addMovieBtn = document.getElementById("add-movie-btn");
  const watchlist = document.getElementById("watchlist");

  async function getMovie(movieName) {
    const urlResponse = await fetch("https://www.omdbapi.com/?t=" + movieName + "&apikey=trilogy");
    const urlData = await urlResponse.json(); 
    return urlData; 
  }

  let myWatchlist = JSON.parse(localStorage.getItem("movies")) || [];

  addMovieBtn.addEventListener("click", async () => {
    const movieName = movieInput.value; // Now this matches the variable above
    if (movieName) {
      const movieData = await getMovie(movieName);
      
      if (movieData.Response === "True") {
        myWatchlist.push(movieData);
        localStorage.setItem("movies", JSON.stringify(myWatchlist));
        renderWatchlist();
        movieInput.value = ""; // Now this matches too
      } else {
        alert("Movie not found!");
      }
    }
  });

  function renderWatchlist() {
    const html = myWatchlist.map(movie => {
        return `<li><strong>${movie.Title}</strong> (${movie.Year})</li>`;
    }).join("");
    
    watchlist.innerHTML = html;
  }

  renderWatchlist();  
</script>
</body>
</html>